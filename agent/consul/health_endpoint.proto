syntax = "proto3";

package consul;

service Health {
    rpc Subscribe(SubscribeRequest) returns (stream UpdateEvent) {}
} 

message SubscribeRequest {
    string key = 1;
}
  
message UpdateEvent {
    repeated ServiceHealthUpdate serviceHealthUpdate = 1;
}

message ServiceHealthUpdate {
    string node = 1;
    string address = 2;
    int32 port = 3;
    repeated HealthCheck checks = 4;
}

message HealthCheck {
    string status = 2;
}